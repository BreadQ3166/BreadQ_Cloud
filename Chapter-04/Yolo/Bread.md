# 前言

> 🍊Hello，各位好，我是面包！
>
> 这篇文档集合了面包的模型训练的学习经历。



## yolo训练

robotflow



## 大语言模型

##### 		函数，有输入有输出的黑盒子。

输入一张狗的图片，输出也是一只狗，说明模型是好模型。

接触神经元的联系结构

评分权重

激活函数





#### 模型压缩



##### 低比特量化

量化训练（QAT）

​		量化训练让模型感知量化对模型精度带来的影响，通过finetune训练降低量化误差。

​		模型量化桥接了定点与浮点

​		线性量化可分为对称量化和非对称量化





机器学习

监督学习

非监督学习

数据和模型

能力

学习效率



## 部署模型到嵌入式设备中

问题

内存和算力-没有CPU-GPU-使用NPU（专门计算卷积和矩阵）->如何利用NPU推导模型-不能进行浮点计算-将浮点运算转化成整形运算-这就是模型的量化-大大减少计算量-加快推导速度-带来精度的丢失





如何在嵌入式平台上运行YOLO模型进行图像识别



通过指令进行格式转化和量化

yolo export model=yolov8n.pt

format=tflite int8=True imgsz=320  //格式转化    模型量化

执行python文件



人工智能模型部署应用场景

设备

PC、浏览器、手机APP、微信小程序





训练端-ONNX-部署端



## 🍅模型量化是什么？

​		简而言之，所谓的模型量化就是将浮点存储（运算）转换为整型存储（运算）的一种[模型压缩](https://so.csdn.net/so/search?q=模型压缩&spm=1001.2101.3001.7020)技术。简单直白点讲，即原来表示一个权重需要使用float32表示，量化后只需要使用int8来表示就可以啦，仅仅这一个操作，我们就可以获得接近4倍的网络加速。

​		模型量化是为了将大而复杂的深度学习模型部署在低成本的嵌入式设备中

​		将浮点数数据量化成8bit的二进制数据。



模型量化实现步骤

对于模型量化任务而言，具体的执行步骤如下所示：

1. 在输入数据（通常是权重或者激活值）中统计出相应的min_value和max_value
2. 选择合适的量化类型、对称量化（int8）还是非对称量化（uint8）
3. 根据量化类型、min_value和max_value来计算获得量化的参数Z/Zero point和S/Scale
4. 根据标定数据对模型执行量化操作，即将其由FP32转化为INT8
5. 验证量化后的模型性能，如果效果不好，尝试着使用不同的方式计算S和Z，重新执行上面的操作                                                                                                                                                                                



## 知识蒸馏-基于yolo模型的数据整合模型

​		

​		预训练大模型只能部署到云端或数据中心



轻量化神经网络

1. 压缩已训练好的模型 知识蒸馏、权值量化、剪枝（权重剪枝、通道剪枝）、注意力迁移
2. 直接训练轻量化网络 squeezeNet
3. 加速卷积运算 im2col
4. 硬件部署 TensorRT



### 知识蒸馏

​		如何让教师网络把知识迁移给学生

​		一般用hard targets（0,1）训练教师网络，然后用soft targets训练学生网络（0:1）。

Soft Label包含了更多“知识”和“信息”像谁，不像谁，有多像，有多不像，特别是非正确类别概率的相对大小（驴和车）

蒸馏温度

​		将贫富差距变小

知识蒸馏过程

​		一个少样本甚至零样本的识别可以通过知识蒸馏来实现。

​		比如老师天天和学生讲熊猫是什么样的，但学生从没有见过熊猫，当熊猫出现时，学生也可以知道它是熊猫。



知识蒸馏的应用场景

1. 模型压缩
2. 优化训练，防止过拟合（潜在的正则化）
3. 无限大、无监督数据集的数据挖掘
4. 少样本、零样本学习
5. 迁移学习（两种不同目标之间（领域）的模型转化）和知识蒸馏（大模型迁移到小模型）

label smoothing



知识蒸馏研究方向

1. 教学相长
2. 助教，多个老师、同学
3. 知识的表示（中间层）、数据集蒸馏、对比学习
4. 多模态、知识图谱、预训练大模型的知识蒸馏

5. 对比学习



#### 		主体内容是教师模型与学生模型，有三种蒸馏方式。

1. 首先训练出一个精度高、数据量大的教师模型，然后学生模型通过教师模型来针对训练；
2. 教师模型和学生模型同时训练；
3. 学生自行训练，学生模型就是教师模型





​		我使用调用了ip-adapt模型尝试了一下风格转绘功能，可以在图片风格上起到一定影响，提示词那个也可以提供一些引导作用，就是说这两种方法都可以起到一定的对图片生成起到微调作用，主要的图片内容还是大致像上次那样，但这个可以简化流程，就是不用手敲主要的提示词了，我们想要它生成什么样内容的图片可以拍一张大致包含所有元素的图片进去让他帮我们分析，我们只需要在这个基础上改进就行了。我大概看了下模型量化和知识蒸馏的大致内容，我们是先通过yolo或其他模型生成一个大模型，然后通过模型量化将浮点运算转化成更小精度的整形运算。知识蒸馏的主要内容就是如何把教师模型的知识迁移给学生模型，也就是将大模型迁移给小模型，这个可以起到一定防止过拟合的作用，但其实具体我了解的只是一些表层上的概念，我觉得要深入理解的话可能还是得先走一遍模型训练的流程，大概了解模型的基本框架才好决定怎么实现模型量化和知识迁移。





11月29日

yolov8模型







